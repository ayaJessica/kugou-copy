webpackJsonp([9],{"1nRG":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),i=n("Dd8w"),s=n.n(i),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"logo-container"},[this._m(0),this._v(" "),e("div",{staticClass:"head-search",on:{click:this.searchRouter}},[e("img",{attrs:{src:"http://m.kugou.com/v3/static/images/index/search.png"}})])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"head-logo"},[e("a",{attrs:{href:"#"}},[e("img",{attrs:{src:"http://m.kugou.com/v3/static/images/index/logo.png"}})])])}]},r=n("VU/8")({methods:{searchRouter:function(){this.$store.commit("showDetailPlayer",!1),this.$router.push({path:"/Search"})}}},o,!1,null,null,null).exports,l={name:"head-nav",computed:{headNav:{get:function(){return this.$store.getters.headNav},set:function(t){var e=t.substr(-1);this.$store.commit("setHeadNav",t),this.goRouter(Number(e))}}},methods:{goRouter:function(t){switch(t){case 1:this.$router.push({path:"/"});break;case 2:this.$router.push({path:"/Rank"});break;case 3:this.$router.push({path:"/Plist"});break;case 4:this.$router.push({path:"/Singer"})}}}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header-nav"},[n("mt-navbar",{staticClass:"container",model:{value:t.headNav,callback:function(e){t.headNav=e},expression:"headNav"}},[n("mt-tab-item",{attrs:{id:"head-nav1"}},[t._v("新歌")]),t._v(" "),n("mt-tab-item",{attrs:{id:"head-nav2"}},[t._v("排行")]),t._v(" "),n("mt-tab-item",{attrs:{id:"head-nav3"}},[t._v("歌单")]),t._v(" "),n("mt-tab-item",{attrs:{id:"head-nav4"}},[t._v("歌手")])],1)],1)},staticRenderFns:[]},u=n("VU/8")(l,c,!1,function(t){n("1nRG")},null,null).exports,d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"rank-head container",style:this.cStyle,attrs:{id:"transparent-header"}},[e("a",{staticClass:"rank-head-back",on:{click:this.routerBack}}),this._v("\n  "+this._s(this.title)+"\n")])},staticRenderFns:[]},h=n("VU/8")({props:["title","to","cStyle"],methods:{routerBack:function(){this.$router.go(-1)}}},d,!1,null,null,null).exports,g=n("NYxO"),p={computed:s()({},Object(g.b)(["head"])),components:{HeadLog:r,HeadNav:u,RankHead:h}},f={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("HeadLog"),this._v(" "),this.head.toggle?e("RankHead",{attrs:{title:this.head.title,cStyle:this.head.style}}):e("HeadNav")],1)},staticRenderFns:[]},m=n("VU/8")(p,f,!1,null,null,null).exports,v={name:"player",data:function(){return{toggleHide:!1}},computed:s()({},Object(g.b)(["audio","audioLoadding","showPlayer","isPlay"])),methods:{change:function(){var t=document.getElementById("audioPlay").currentTime;this.audio.currentFlag?(document.getElementById("audioPlay").currentTime=this.audio.currentLength,this.$store.commit("setCurrent",!1)):this.$store.commit("setAudioTime",t)},next:function(){this.$store.dispatch("next")},togglePanel:function(){this.toggleHide=!this.toggleHide},showDetailPlayer:function(){this.showPlayer&&this.$store.commit("showDetailPlayer",!0)},toggleStatus:function(){this.isPlay?document.getElementById("audioPlay").pause():document.getElementById("audioPlay").play(),this.$store.commit("isPlay",!this.isPlay)}}},y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"audio-view",class:{audio_panel_hide:t.toggleHide}},[n("audio",{attrs:{src:t.audio.songUrl,autoplay:"",id:"audioPlay"},on:{timeupdate:function(e){t.change()},end:function(e){t.next()},error:function(e){t.next()}}}),t._v(" "),n("div",{staticClass:"audio-panel-control",class:{toggleContral:t.toggleHide},on:{click:function(e){t.togglePanel()}}},[n("mt-spinner",{directives:[{name:"show",rawName:"v-show",value:t.audioLoadding,expression:"audioLoadding"}],attrs:{type:"snake",size:27}})],1),t._v(" "),n("div",{staticClass:"audio-panel"},[n("img",{staticClass:"player-img",attrs:{alt:"",src:t.audio.imgUrl},on:{click:function(e){t.showDetailPlayer()}}}),t._v(" "),n("div",{staticClass:"player-status",on:{click:function(e){t.showDetailPlayer()}}},[n("p",{staticClass:"player-title ellipsis"},[t._v(t._s(t.audio.title))]),t._v(" "),n("p",{staticClass:"player-singer ellipsis"},[t._v(t._s(t.audio.singer))])]),t._v(" "),n("div",{staticClass:"player-controls"},[n("span",{staticClass:"player-Play",class:{"player-Pause":t.isPlay},on:{click:function(e){t.toggleStatus()}}}),t._v(" "),n("span",{staticClass:"player-nextSong",on:{click:function(e){t.next()}}})])])])},staticRenderFns:[]},_=n("VU/8")(v,y,!1,null,null,null).exports,P={data:function(){return{rangeValue:0}},filters:{time:function(t){var e=Math.floor(parseInt(t)),n=Math.floor(t/60);n<10&&(n="0"+n);var a=e%60;return a<10&&(a="0"+a),n+":"+a}},computed:s()({},Object(g.b)(["audio","detailPlayerFlag","isPlay"]),{songLrc:function(){if(this.audio.lrc){var t=this.audio.lrc.split("\r\n");return t=t.splice(0,t.length-1),t=t.map(function(t){var e=t.substr(1,5);return{seconds:60*parseInt(e.split(":")[0])+parseInt(e.split(":")[1]),lrcContent:t.substr(10)}})}},lrcOffset:function(){if(this.songLrc){var t=-20*(this.songLrc.length-document.querySelectorAll(".isCurrentLrc").length-2);return this.audio.currentLength+t-this.audio.currentLength}}}),methods:{hideDetailPlayer:function(){this.$store.commit("showDetailPlayer",!1)},rangeChange:function(t){var e=t.offsetX,n=.8*(document.documentElement.clientWidth-20)-20,a=Math.floor(e*this.audio.songLength/n);e<n&&(this.$store.commit("setAudioTime",a),this.$store.commit("setCurrent",!0))},toggleStatus:function(){this.isPlay?document.getElementById("audioPlay").pause():document.getElementById("audioPlay").play(),this.$store.commit("isPlay",!this.isPlay)},prev:function(){this.$store.dispatch("prev")},next:function(){this.$store.dispatch("next")}}},C={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.detailPlayerFlag,expression:"detailPlayerFlag"}]},[n("div",{staticClass:"detail_player",style:{backgroundImage:"url("+t.audio.imgUrl+")"}}),t._v(" "),n("div",{staticClass:"detail_player",style:{backgroundImage:"url("+t.audio.imgUrl+")",filter:"blur(5px)","=webkit-filter":"blur(5px)"}}),t._v(" "),n("div",{staticClass:"detail_player-content"},[n("div",{staticClass:"detail_player-title container"},[n("span",{staticClass:"detail_player-back",on:{click:function(e){t.hideDetailPlayer()}}}),t._v("\r\n      "+t._s(t.audio.title)+"\r\n    ")]),t._v(" "),n("div",{staticClass:"detail_player-img"},[n("img",{attrs:{src:t.audio.imgUrl}})]),t._v(" "),n("div",{staticClass:"detail_player-lrc"},[n("div",{staticClass:"lrc-content",style:{marginTop:t.lrcOffset+"px"}},t._l(t.songLrc,function(e,a){return n("p",{class:{isCurrentLrc:e.seconds>=t.audio.currentLength}},[t._v("\r\n          "+t._s(e.lrcContent)+"\r\n        ")])}))]),t._v(" "),n("div",{staticClass:"detail_player-range container"},[n("span",{staticClass:"detail_player-time"},[t._v(t._s(t._f("time")(t.audio.currentLength)))]),t._v(" "),n("mt-range",{staticStyle:{width:"80%"},attrs:{id:"range",min:0,max:t.audio.songLength,"bar-height":3,disabled:""},nativeOn:{click:function(e){t.rangeChange(e)}},model:{value:t.audio.currentLength,callback:function(e){t.$set(t.audio,"currentLength",e)},expression:"audio.currentLength"}}),t._v(" "),n("span",{staticClass:"detail_player-time"},[t._v(t._s(t._f("time")(t.audio.songLength)))])],1),t._v(" "),n("div",{staticClass:"detail_player-control player-padding"},[n("i",{staticClass:"detail_player-btn play-prev player_btn-sm",on:{click:function(e){t.prev()}}}),t._v(" "),n("i",{staticClass:"detail_player-btn play-play player_btn-lg",class:{"play-pause":t.isPlay},on:{click:function(e){t.toggleStatus()}}}),t._v(" "),n("i",{staticClass:"detail_player-btn play-next player_btn-sm",on:{click:function(e){t.next()}}})])])])},staticRenderFns:[]},b={name:"app",components:{Head:m,Player:_,DetaiPlayer:n("VU/8")(P,C,!1,null,null,null).exports}},x={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Head"),this._v(" "),e("div",{staticClass:"main"},[e("keep-alive",[e("router-view")],1)],1),this._v(" "),e("Player"),this._v(" "),e("DetaiPlayer")],1)},staticRenderFns:[]},L=n("VU/8")(b,x,!1,null,null,null).exports,k=n("/ocq");a.default.use(k.a);var I=new k.a({routes:[{path:"/newSongs",component:function(t){return Promise.all([n.e(0),n.e(3)]).then(function(){return t(n("gXOW"))}.bind(null,n)).catch(n.oe)},alias:"/"},{path:"/Search",component:function(t){return Promise.all([n.e(0),n.e(6)]).then(function(){return t(n("2QH8"))}.bind(null,n)).catch(n.oe)}},{path:"/Rank",component:function(t){return n.e(4).then(function(){return t(n("+cht"))}.bind(null,n)).catch(n.oe)}},{path:"/Rank/info/:id",component:function(t){return Promise.all([n.e(0),n.e(2)]).then(function(){return t(n("TDYl"))}.bind(null,n)).catch(n.oe)}},{path:"/Plist",component:function(t){return n.e(7).then(function(){return t(n("VAMs"))}.bind(null,n)).catch(n.oe)}},{path:"/Plist/info/:id",component:function(t){return Promise.all([n.e(0),n.e(1)]).then(function(){return t(n("ekbc"))}.bind(null,n)).catch(n.oe)}},{path:"/Singer",component:function(t){return n.e(5).then(function(){return t(n("rNVE"))}.bind(null,n)).catch(n.oe)}},{path:"*",redirect:"/"}]}),w=n("mtWM"),$=n.n(w);a.default.use(g.a);var S=new g.a.Store({state:{head:{toggle:!1,title:"",style:{background:"rgbs(43,162,251,0)"}},headNav:"head-nav1",listInfo:{songList:[],songIndex:0},audioLoadding:!1,audio:{songUrl:"",imgUrl:"http://m.kugou.com/v3/static/images/index/logo_kugou.png",title:"",singer:"",currentLength:0,songLength:0,currentFlag:!1,listenCount:0},detailPlayerFlag:!1,showPlayer:!1,isPlay:!0},getters:{head:function(t){return t.head},headNav:function(t){return t.headNav},audio:function(t){return t.audio},audioLoadding:function(t){return t.audioLoadding},showPlayer:function(t){return t.showPlayer},isPlay:function(t){return t.isPlay},detailPlayerFlag:function(t){return t.detailPlayerFlag}},mutations:{setHeadNav:function(t,e){t.headNav=e},setListInfo:function(t,e){var n=e.list,a=e.index;t.listInfo.songList=n,t.listInfo.songIndex=a},toggleAudioLoading:function(t,e){t.audioLoadding=e},setAudio:function(t,e){t.listenCount||(t.showPlayer=!0),t.listenCount++,t.audio=s()({},t.audio,e)},setLrc:function(t,e){t.audio=s()({},t.audio,{lrc:e})},showDetailPlayer:function(t,e){t.detailPlayerFlag=e},isPlay:function(t,e){t.isPlay=e},setCurrent:function(t,e){t.audio.currentFlag=e},setAudioTime:function(t,e){t.audio.currentLength=e},setHeadTitle:function(t,e){t.head.title=e},setHeadStyle:function(t,e){t.head.style=e},showHead:function(t,e){t.head.toggle=e}},actions:{getSong:function(t,e){var n=t.commit;t.state;n("toggleAudioLoading",!0),$.a.get("/bproxy/yy/index.php?r=play/getdata&hash="+e).then(function(t){var e=t.data,a=(e=e.data).play_url,i=e.img,s=e.audio_name,o=e.timelength/1e3,r=e.author_name,l=e.lyrics;n("setAudio",{songUrl:a,imgUrl:i,title:s,singer:r,songLength:o,currentLength:0}),n("setLrc",l),n("toggleAudioLoading",!1)})},prev:function(t){var e=t.dispatch,n=t.state,a=n.listInfo.songList;if(0==n.listInfo.songIndex?n.listInfo.songIndex=a.length:n.listInfo.songIndex--,a[n.listInfo.songIndex]){e("getSong",a[n.listInfo.songIndex].hash)}},next:function(t){var e=t.dispatch,n=t.state,a=n.listInfo.songList;if(n.listInfo.songIndex==a.length-1?n.listInfo.songIndex=0:++n.listInfo.songIndex,a[n.listInfo.songIndex]){e("getSong",a[n.listInfo.songIndex].hash)}}}}),H=n("Au9i"),N=n.n(H);n("d8/S"),n("VaBq"),n("oYYC");a.default.use(N.a),a.default.config.productionTip=!1,a.default.prototype.$http=$.a,new a.default({el:"#app",router:I,store:S,render:function(t){return t(L)}})},VaBq:function(t,e){},"d8/S":function(t,e){},oYYC:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.23ff38978414436fb221.js.map